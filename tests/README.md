# 📋 语音通知系统 - 测试指南

## 🎯 测试说明（小白版）

### 什么是测试？
就像你买了新家电要先试试能不能用一样，程序也需要"试运行"来确保一切正常。

### 测试的好处
1. **提前发现问题** - 不用等到真正使用时才发现bug
2. **保证质量** - 确保每个功能都能正常工作
3. **节省时间** - 一键检查所有功能，不用手动一个个试
4. **增加信心** - 看到绿色的✅，心里就踏实了

---

## 🚀 快速开始

### 最简单的方法（推荐新手）

打开 PowerShell，运行：

```powershell
# 进入测试目录
cd H:\HZH\Little-Projects\voice-notification-project\tests

# 运行所有测试
.\Run-AllTests.ps1
```

就这么简单！等待几秒钟，你会看到：
- ✅ 绿色表示通过
- ❌ 红色表示有问题

---

## 📊 三种测试模式

### 1. **快速测试**（10秒）
```powershell
.\Run-AllTests.ps1 -Quick
```
- 只测试最基本的功能
- 适合日常快速检查

### 2. **标准测试**（30秒）
```powershell
.\Run-AllTests.ps1
```
- 测试所有主要功能
- 推荐日常使用

### 3. **完整测试**（1分钟）
```powershell
.\Run-AllTests.ps1 -Full
```
- 包含性能测试
- 适合重要更新后使用

---

## 🔍 测试内容详解

### **基础环境测试** (`Test-VoiceNotification.ps1`)
检查你的电脑是否满足运行条件：

| 测试项 | 检查内容 | 如果失败怎么办 |
|--------|---------|--------------|
| PowerShell版本 | 是否是5.1以上 | 更新Windows PowerShell |
| Edge-TTS | 语音引擎是否安装 | 运行 `pip install edge-tts` |
| Ollama | AI服务是否运行 | 启动Ollama服务 |
| 模块加载 | 程序文件是否完整 | 重新下载项目 |
| 配置文件 | 设置是否正确 | 检查配置文件 |

### **集成测试** (`Test-Integration.ps1`)
模拟实际使用场景：

1. **简单任务** - 模拟用户让Claude创建文件
2. **复杂任务** - 模拟用户让Claude写代码
3. **错误处理** - 测试出错时的表现

### **性能测试**（完整模式）
测试速度和资源占用：
- 语音生成速度
- 文件大小
- 响应时间

---

## 🎯 常见问题

### Q: 测试失败了怎么办？
A: 看测试报告，会告诉你具体哪里有问题：
```powershell
# 查看最新的测试报告
Get-Content TestReport_*.txt | Select -Last 1
```

### Q: 能听到测试语音吗？
A: 可以！加上 `-PlaySound` 参数：
```powershell
.\Run-AllTests.ps1 -PlaySound
```

### Q: 测试会影响正常使用吗？
A: 不会！测试在独立环境运行，不影响你的正常配置。

---

## 📈 测试报告解读

运行测试后会生成报告文件 `TestReport_日期_时间.txt`：

```
语音通知系统测试报告
========================
生成时间: 2025-01-11 15:30:00
测试模式: 标准

测试结果:
---------
• 基础环境测试: PASS (耗时: 5.2秒)
• 集成测试: PASS (耗时: 12.3秒)

统计信息:
---------
总测试套件: 2
成功: 2
失败: 0
成功率: 100%
总耗时: 17.5秒
```

### 成功率参考：
- **100%** - 完美！可以放心使用
- **80-99%** - 良好，个别小问题不影响使用
- **60-79%** - 需要修复一些问题
- **<60%** - 有重大问题，需要检查

---

## 🛠️ 单独运行某个测试

如果只想测试特定功能：

```powershell
# 只测试环境
.\Test-VoiceNotification.ps1

# 只测试工作流
.\Test-Integration.ps1

# 测试语音播放
.\Test-PlaySound.ps1
```

---

## 💡 测试最佳实践

### 什么时候运行测试？

1. **每天第一次使用前** - 快速测试
2. **更新代码后** - 标准测试
3. **重大改动后** - 完整测试
4. **出现问题时** - 运行相关测试定位问题

### 测试顺序建议

```powershell
# 1. 先快速测试
.\Run-AllTests.ps1 -Quick

# 2. 如果有问题，运行标准测试看详情
.\Run-AllTests.ps1

# 3. 需要深入分析时，运行完整测试
.\Run-AllTests.ps1 -Full -PlaySound
```

---

## 📝 测试清单（可以打印）

运行测试前的准备：

- [ ] PowerShell 以管理员身份运行
- [ ] Ollama 服务已启动
- [ ] 网络连接正常
- [ ] 音频设备正常

测试步骤：

1. [ ] 打开 PowerShell
2. [ ] 进入测试目录
3. [ ] 运行 `.\Run-AllTests.ps1`
4. [ ] 查看测试结果
5. [ ] 如有失败，查看报告文件

---

## 🎉 恭喜！

你现在已经了解了测试系统的全部内容。记住：

> **测试就像体检，定期做才能保持健康！**

有问题随时查看这个文档，或者问我 😊

---

**作者**: 壮爸 | **版本**: 1.0 | **更新**: 2025-01-11